{"remainingRequest":"/Users/huilin/Orbital/nutypeset_front-end/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js??ref--16-1!/Users/huilin/Orbital/nutypeset_front-end/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/huilin/Orbital/nutypeset_front-end/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/huilin/Orbital/nutypeset_front-end/node_modules/_cube-ui@1.12.46@cube-ui/src/components/validator/validator.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huilin/Orbital/nutypeset_front-end/node_modules/_cube-ui@1.12.46@cube-ui/src/components/validator/validator.vue","mtime":1624802121475},{"path":"/Users/huilin/Orbital/nutypeset_front-end/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":1624802120672},{"path":"/Users/huilin/Orbital/nutypeset_front-end/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":1624802120544},{"path":"/Users/huilin/Orbital/nutypeset_front-end/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":1624802120672},{"path":"/Users/huilin/Orbital/nutypeset_front-end/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":1624802123696}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2h1aWxpbi9PcmJpdGFsL251dHlwZXNldF9mcm9udC1lbmQvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE0LjZAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBwYXJhbGxlbCwgY2IyUHJvbWlzZVdpdGhSZXNvbHZlLCBpc1VuZGVmLCBpc0Z1bmMsIGlzU3RyaW5nLCBpc0FycmF5IH0gZnJvbSAnLi4vLi4vY29tbW9uL2hlbHBlcnMvdXRpbCc7CmltcG9ydCB7IHJ1bGVzIH0gZnJvbSAnLi4vLi4vY29tbW9uL2hlbHBlcnMvdmFsaWRhdG9yJzsKaW1wb3J0IGxvY2FsZU1peGluIGZyb20gJy4uLy4uL2NvbW1vbi9taXhpbnMvbG9jYWxlJzsKaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4uLy4uL2NvbW1vbi9oZWxwZXJzL3N0cmluZy10ZW1wbGF0ZSc7CnZhciBDT01QT05FTlRfTkFNRSA9ICdjdWJlLXZhbGlkYXRvcic7CnZhciBFVkVOVF9JTlBVVCA9ICdpbnB1dCc7CnZhciBFVkVOVF9WQUxJREFUSU5HID0gJ3ZhbGlkYXRpbmcnOwp2YXIgRVZFTlRfVkFMSURBVEVEID0gJ3ZhbGlkYXRlZCc7CnZhciBFVkVOVF9NU0dfQ0xJQ0sgPSAnbXNnLWNsaWNrJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6IENPTVBPTkVOVF9OQU1FLAogIG1peGluczogW2xvY2FsZU1peGluXSwKICBwcm9wczogewogICAgbW9kZWw6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBtb2RlbEtleTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICJkZWZhdWx0IjogJycKICAgIH0sCiAgICBydWxlczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbWVzc2FnZXM6IHsKICAgICAgdHlwZTogW09iamVjdCwgU3RyaW5nXSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICB2YWx1ZToge30sCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICAiZGVmYXVsdCI6IGZhbHNlCiAgICB9LAogICAgaW1tZWRpYXRlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICJkZWZhdWx0IjogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogdGhpcy52YWx1ZSwKICAgICAgdmFsaWRhdGVkOiBmYWxzZSwKICAgICAgbXNnOiAnJywKICAgICAgZGlydHk6IGZhbHNlLAogICAgICB2YWxpZGF0aW5nOiBmYWxzZSwKICAgICAgcmVzdWx0OiB7fQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0YXJnZXRNb2RlbDogZnVuY3Rpb24gdGFyZ2V0TW9kZWwoKSB7CiAgICAgIHZhciBtb2RlbEtleSA9IHRoaXMubW9kZWxLZXk7CiAgICAgIHZhciBtb2RlbCA9IHRoaXMubW9kZWw7CiAgICAgIHJldHVybiBtb2RlbEtleSA/IG1vZGVsW21vZGVsS2V5XSA6IG1vZGVsOwogICAgfSwKICAgIGludmFsaWQ6IGZ1bmN0aW9uIGludmFsaWQoKSB7CiAgICAgIHZhciB2YWxpZCA9IHRoaXMudmFsaWQ7CiAgICAgIHJldHVybiBpc1VuZGVmKHZhbGlkKSA/IHVuZGVmaW5lZCA6ICF2YWxpZDsKICAgIH0sCiAgICBpc0Rpc2FibGVkOiBmdW5jdGlvbiBpc0Rpc2FibGVkKCkgewogICAgICB2YXIgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkOwogICAgICB2YXIgbm9SdWxlcyA9IE9iamVjdC5rZXlzKHRoaXMucnVsZXMpLmxlbmd0aCA8PSAwOwogICAgICByZXR1cm4gZGlzYWJsZWQgfHwgbm9SdWxlczsKICAgIH0sCiAgICBkaXJ0eU9yVmFsaWRhdGVkOiBmdW5jdGlvbiBkaXJ0eU9yVmFsaWRhdGVkKCkgewogICAgICByZXR1cm4gKHRoaXMuZGlydHkgfHwgdGhpcy52YWxpZGF0ZWQpICYmICF0aGlzLnZhbGlkYXRpbmc7CiAgICB9LAogICAgY29udGFpbmVyQ2xhc3M6IGZ1bmN0aW9uIGNvbnRhaW5lckNsYXNzKCkgewogICAgICB2YXIgZGlzYWJsZWQgPSB0aGlzLmlzRGlzYWJsZWQ7CgogICAgICBpZiAoZGlzYWJsZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgJ2N1YmUtdmFsaWRhdG9yX2ludmFsaWQnOiB0aGlzLmludmFsaWQsCiAgICAgICAgJ2N1YmUtdmFsaWRhdG9yX3ZhbGlkJzogdGhpcy52YWxpZCwKICAgICAgICAnY3ViZS12YWxpZGF0b3JfdmFsaWRhdGluZyc6IHRoaXMudmFsaWRhdGluZwogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShuZXdWYWwpIHsKICAgICAgdGhpcy52YWxpZCA9IG5ld1ZhbDsKICAgIH0sCiAgICB0YXJnZXRNb2RlbDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghdGhpcy5kaXJ0eSkgewogICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnZhbGlkYXRlKCk7CiAgICAgIH0sCiAgICAgIHN5bmM6IHRydWUKICAgIH0sCiAgICBydWxlczogZnVuY3Rpb24gcnVsZXMoKSB7CiAgICAgIHRoaXMudmFsaWRhdGUoKTsKICAgIH0sCiAgICBpc0Rpc2FibGVkOiBmdW5jdGlvbiBpc0Rpc2FibGVkKG5ld1ZhbCkgewogICAgICBpZiAoIW5ld1ZhbCAmJiB0aGlzLnRyaWdnZXIgJiYgIXRoaXMudmFsaWRhdGVkKSB7CiAgICAgICAgdGhpcy52YWxpZGF0ZSgpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5fdmFsaWRhdGVDb3VudCA9IDA7CgogICAgaWYgKCF0aGlzLmlzRGlzYWJsZWQgJiYgdGhpcy5pbW1lZGlhdGUpIHsKICAgICAgdGhpcy52YWxpZGF0ZSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGNiKSB7CiAgICAgIHZhciBwcm9taXNlID0gY2IyUHJvbWlzZVdpdGhSZXNvbHZlKGNiKTsKCiAgICAgIGlmIChwcm9taXNlKSB7CiAgICAgICAgY2IgPSBwcm9taXNlLnJlc29sdmU7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQpIHsKICAgICAgICBjYiAmJiBjYih0aGlzLnZhbGlkKTsKICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgfQoKICAgICAgdGhpcy5fdmFsaWRhdGVDb3VudCsrOwogICAgICB2YXIgdmFsaWRhdGVDb3VudCA9IHRoaXMuX3ZhbGlkYXRlQ291bnQ7CiAgICAgIHZhciB2YWwgPSB0aGlzLnRhcmdldE1vZGVsOwogICAgICB2YXIgY29uZmlnUnVsZXMgPSB0aGlzLnJ1bGVzOwogICAgICB2YXIgdHlwZSA9IGNvbmZpZ1J1bGVzLnR5cGU7CiAgICAgIHZhciBhbGxUYXNrcyA9IFtdOwogICAgICB2YXIgcmVxdWlyZWRWYWxpZCA9IHRydWU7CgogICAgICBpZiAoIWNvbmZpZ1J1bGVzLnJlcXVpcmVkKSB7CiAgICAgICAgLy8gdHJlYXQgaXQgYXMgZW1wdHksIG5vIG5lZWQgdG8gdmFsaWRhdGUgb3RoZXIgcnVsZXMKICAgICAgICByZXF1aXJlZFZhbGlkID0gcnVsZXMucmVxdWlyZWQodmFsLCB0cnVlLCB0eXBlKTsKICAgICAgfQoKICAgICAgaWYgKHJlcXVpcmVkVmFsaWQpIHsKICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChrZXkpIHsKICAgICAgICAgIHZhciBydWxlVmFsdWUgPSBjb25maWdSdWxlc1trZXldOwogICAgICAgICAgdmFyIHJldCA9IHZvaWQgMDsKCiAgICAgICAgICBpZiAoaXNGdW5jKHJ1bGVWYWx1ZSkpIHsKICAgICAgICAgICAgcmV0ID0gcnVsZVZhbHVlKHZhbCwgY29uZmlnUnVsZXNba2V5XSwgdHlwZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXQgPSAhcnVsZXNba2V5XSB8fCBydWxlc1trZXldKHZhbCwgY29uZmlnUnVsZXNba2V5XSwgdHlwZSk7CiAgICAgICAgICB9CgogICAgICAgICAgYWxsVGFza3MucHVzaChmdW5jdGlvbiAobmV4dCkgewogICAgICAgICAgICB2YXIgcmVzb2x2ZSA9IGZ1bmN0aW9uIHJlc29sdmUoX3JldCkgewogICAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgICB2YWxpZDogX3JldCA9PT0gdHJ1ZSwKICAgICAgICAgICAgICAgIHJldDogX3JldAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHJlamVjdCA9IGZ1bmN0aW9uIHJlamVjdChlcnIpIHsKICAgICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgcmV0OiBlcnIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmIChfdHlwZW9mKHJldCkgPT09ICdvYmplY3QnICYmIGlzRnVuYyhyZXQudGhlbikpIHsKICAgICAgICAgICAgICByZXQudGhlbihyZXNvbHZlKVsiY2F0Y2giXShyZWplY3QpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGlzRnVuYyhyZXQpKSB7CiAgICAgICAgICAgICAgcmV0KHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgICAgICAgIHZhbGlkOiByZXQgPT09IHRydWUsCiAgICAgICAgICAgICAgICByZXQ6IHJldAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gY29uZmlnUnVsZXMpIHsKICAgICAgICAgIF9sb29wKGtleSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLl9jaGVja1Rhc2tzKGFsbFRhc2tzLCB2YWxpZGF0ZUNvdW50LCBjYik7CgogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0sCiAgICBfY2hlY2tUYXNrczogZnVuY3Rpb24gX2NoZWNrVGFza3MoYWxsVGFza3MsIHZhbGlkYXRlQ291bnQsIGNiKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY29uZmlnUnVsZXMgPSB0aGlzLnJ1bGVzOwogICAgICB2YXIgaXNWYWxpZCA9IHRydWU7CiAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgdmFyIHN5bmMgPSB0cnVlOwogICAgICB0aGlzLnZhbGlkYXRpbmcgPSB0cnVlOwogICAgICB2YXIgbW9kZWwgPSB0aGlzLnRhcmdldE1vZGVsOwogICAgICBwYXJhbGxlbChhbGxUYXNrcywgZnVuY3Rpb24gKHJlc3VsdHMpIHsKICAgICAgICBpZiAoX3RoaXMuX3ZhbGlkYXRlQ291bnQgIT09IHZhbGlkYXRlQ291bnQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzLnZhbGlkYXRpbmcgPSBmYWxzZTsKICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgIHZhciBrZXkgPSBfcmVmLmtleSwKICAgICAgICAgICAgICB2YWxpZCA9IF9yZWYudmFsaWQsCiAgICAgICAgICAgICAgcmV0ID0gX3JlZi5yZXQ7CiAgICAgICAgICB2YXIgbXNnID0gX3RoaXMubWVzc2FnZXNba2V5XSA/IGlzRnVuYyhfdGhpcy5tZXNzYWdlc1trZXldKSA/IF90aGlzLm1lc3NhZ2VzW2tleV0ocmV0LCB2YWxpZCkgOiBfdGhpcy5tZXNzYWdlc1trZXldIDogX3RoaXMuZmluZE1lc3NhZ2Uoa2V5LCBjb25maWdSdWxlc1trZXldLCBjb25maWdSdWxlcy50eXBlLCBtb2RlbCk7CgogICAgICAgICAgaWYgKGlzVmFsaWQgJiYgIXZhbGlkKSB7CiAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMubXNnID0gbXNnOwogICAgICAgICAgfQoKICAgICAgICAgIHJlc3VsdFtrZXldID0gewogICAgICAgICAgICB2YWxpZDogdmFsaWQsCiAgICAgICAgICAgIGludmFsaWQ6ICF2YWxpZCwKICAgICAgICAgICAgbWVzc2FnZTogbXNnCiAgICAgICAgICB9OwogICAgICAgIH0pOwoKICAgICAgICBpZiAoIXN5bmMpIHsKICAgICAgICAgIF90aGlzLiRlbWl0KEVWRU5UX1ZBTElEQVRFRCwgaXNWYWxpZCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5fdXBkYXRlTW9kZWwoaXNWYWxpZCwgcmVzdWx0KTsKCiAgICAgICAgY2IgJiYgY2IoX3RoaXMudmFsaWQpOwogICAgICB9KTsKCiAgICAgIGlmICh0aGlzLnZhbGlkYXRpbmcpIHsKICAgICAgICBzeW5jID0gZmFsc2U7IC8vIG9ubHkgYXN5bmMgdmFsaWRhdGUgdHJpZ2dlciB2YWxpZGF0aW5nCgogICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfVkFMSURBVElORyk7CiAgICAgICAgdGhpcy52YWxpZCA9IHVuZGVmaW5lZDsKICAgICAgICB0aGlzLiRlbWl0KEVWRU5UX0lOUFVULCB0aGlzLnZhbGlkKTsKICAgICAgfQogICAgfSwKICAgIF91cGRhdGVNb2RlbDogZnVuY3Rpb24gX3VwZGF0ZU1vZGVsKHZhbGlkLCByZXN1bHQpIHsKICAgICAgdGhpcy52YWxpZGF0ZWQgPSB0cnVlOwogICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKCiAgICAgIGlmIChyZXN1bHQucmVxdWlyZWQgJiYgcmVzdWx0LnJlcXVpcmVkLmludmFsaWQpIHsKICAgICAgICAvLyByZXF1aXJlZAogICAgICAgIHRoaXMubXNnID0gcmVzdWx0LnJlcXVpcmVkLm1lc3NhZ2U7CiAgICAgIH0KCiAgICAgIGlmICh2YWxpZCkgewogICAgICAgIHRoaXMubXNnID0gJyc7CiAgICAgIH0KCiAgICAgIHRoaXMudmFsaWQgPSB2YWxpZDsKICAgICAgdGhpcy4kZW1pdChFVkVOVF9JTlBVVCwgdGhpcy52YWxpZCk7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLl92YWxpZGF0ZUNvdW50Kys7CiAgICAgIHRoaXMudmFsaWRhdGluZyA9IGZhbHNlOwogICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIHRoaXMucmVzdWx0ID0ge307CiAgICAgIHRoaXMubXNnID0gJyc7CiAgICAgIHRoaXMudmFsaWRhdGVkID0gZmFsc2U7CiAgICAgIHRoaXMudmFsaWQgPSB1bmRlZmluZWQ7CiAgICAgIHRoaXMuJGVtaXQoRVZFTlRfSU5QVVQsIHRoaXMudmFsaWQpOwogICAgfSwKICAgIG1zZ0NsaWNrSGFuZGxlcjogZnVuY3Rpb24gbXNnQ2xpY2tIYW5kbGVyKCkgewogICAgICB0aGlzLiRlbWl0KEVWRU5UX01TR19DTElDSyk7CiAgICB9LAogICAgZmluZE1lc3NhZ2U6IGZ1bmN0aW9uIGZpbmRNZXNzYWdlKGtleSwgY29uZmlnLCB0eXBlLCB2YWwpIHsKICAgICAgdmFyIG1lc3NhZ2VzID0gdGhpcy4kY3ViZU1lc3NhZ2VzOwogICAgICB2YXIgbGFuZyA9IHRoaXMuJGN1YmVMYW5nOwogICAgICB2YXIgTkFNRVNQQUNFID0gJ3ZhbGlkYXRvcic7CiAgICAgIHZhciB0YXJnZXQgPSBtZXNzYWdlc1tsYW5nXVtOQU1FU1BBQ0VdW2tleV07CgogICAgICBpZiAoIXRhcmdldCkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgaWYgKGlzU3RyaW5nKHRhcmdldCkpIHsKICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9IGVsc2UgaWYgKGlzRnVuYyh0YXJnZXQpKSB7CiAgICAgICAgcmV0dXJuIHRhcmdldChjb25maWcpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghdGFyZ2V0W3R5cGVdKSB7CiAgICAgICAgICB0eXBlID0gaXNBcnJheSh2YWwpID8gJ2FycmF5JyA6IF90eXBlb2YodmFsKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0eXBlb2YgdGFyZ2V0W3R5cGVdID09PSAnZnVuY3Rpb24nID8gdGFyZ2V0W3R5cGVdKGNvbmZpZykgOiB0ZW1wbGF0ZSh0YXJnZXRbdHlwZV0sIGNvbmZpZyk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["validator.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cube-validator\" :class=\"containerClass\">\n    <div class=\"cube-validator-content\">\n      <slot></slot>\n    </div>\n    <div class=\"cube-validator-msg\" @click=\"msgClickHandler\">\n      <slot\n        name=\"message\"\n        :message=\"msg\"\n        :dirty=\"dirty\"\n        :validated=\"validated\"\n        :validating=\"validating\"\n        :result=\"result\"\n      >\n        <span class=\"cube-validator-msg-def\">{{ dirtyOrValidated ? msg : '' }}</span>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import { parallel, cb2PromiseWithResolve, isUndef, isFunc, isString, isArray } from '../../common/helpers/util'\n  import { rules } from '../../common/helpers/validator'\n  import localeMixin from '../../common/mixins/locale'\n  import template from '../../common/helpers/string-template'\n\n  const COMPONENT_NAME = 'cube-validator'\n  const EVENT_INPUT = 'input'\n  const EVENT_VALIDATING = 'validating'\n  const EVENT_VALIDATED = 'validated'\n  const EVENT_MSG_CLICK = 'msg-click'\n\n  export default {\n    name: COMPONENT_NAME,\n    mixins: [localeMixin],\n    props: {\n      model: {\n        required: true\n      },\n      modelKey: {\n        type: String,\n        default: ''\n      },\n      rules: {\n        type: Object,\n        default() {\n          return {}\n        }\n      },\n      messages: {\n        type: [Object, String],\n        default() {\n          return {}\n        }\n      },\n      value: {},\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      immediate: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        valid: this.value,\n        validated: false,\n        msg: '',\n        dirty: false,\n        validating: false,\n        result: {}\n      }\n    },\n    computed: {\n      targetModel() {\n        const modelKey = this.modelKey\n        const model = this.model\n        return modelKey ? model[modelKey] : model\n      },\n      invalid() {\n        const valid = this.valid\n        return isUndef(valid) ? undefined : !valid\n      },\n      isDisabled() {\n        const disabled = this.disabled\n        const noRules = Object.keys(this.rules).length <= 0\n        return disabled || noRules\n      },\n      dirtyOrValidated() {\n        return (this.dirty || this.validated) && !this.validating\n      },\n      containerClass() {\n        const disabled = this.isDisabled\n        if (disabled) {\n          return\n        }\n        return {\n          'cube-validator_invalid': this.invalid,\n          'cube-validator_valid': this.valid,\n          'cube-validator_validating': this.validating\n        }\n      }\n    },\n    watch: {\n      value(newVal) {\n        this.valid = newVal\n      },\n      targetModel: {\n        handler() {\n          if (this.isDisabled) {\n            return\n          }\n          if (!this.dirty) {\n            this.dirty = true\n          }\n\n          this.validate()\n        },\n        sync: true\n      },\n      rules() {\n        this.validate()\n      },\n      isDisabled(newVal) {\n        if (!newVal && this.trigger && !this.validated) {\n          this.validate()\n        }\n      }\n    },\n    created() {\n      this._validateCount = 0\n      if (!this.isDisabled && this.immediate) {\n        this.validate()\n      }\n    },\n    methods: {\n      validate(cb) {\n        const promise = cb2PromiseWithResolve(cb)\n        if (promise) {\n          cb = promise.resolve\n        }\n        if (this.isDisabled) {\n          cb && cb(this.valid)\n          return promise\n        }\n        this._validateCount++\n        const validateCount = this._validateCount\n        const val = this.targetModel\n\n        const configRules = this.rules\n        const type = configRules.type\n        const allTasks = []\n\n        let requiredValid = true\n        if (!configRules.required) {\n          // treat it as empty, no need to validate other rules\n          requiredValid = rules.required(val, true, type)\n        }\n\n        if (requiredValid) {\n          for (const key in configRules) {\n            const ruleValue = configRules[key]\n            let ret\n            if (isFunc(ruleValue)) {\n              ret = ruleValue(val, configRules[key], type)\n            } else {\n              ret = !rules[key] || rules[key](val, configRules[key], type)\n            }\n            allTasks.push((next) => {\n              const resolve = (_ret) => {\n                next({\n                  key: key,\n                  valid: _ret === true,\n                  ret: _ret\n                })\n              }\n              const reject = (err) => {\n                next({\n                  key: key,\n                  valid: false,\n                  ret: err\n                })\n              }\n              if (typeof ret === 'object' && isFunc(ret.then)) {\n                ret.then(resolve).catch(reject)\n              } else if (isFunc(ret)) {\n                ret(resolve, reject)\n              } else {\n                next({\n                  key: key,\n                  valid: ret === true,\n                  ret: ret\n                })\n              }\n            })\n          }\n        }\n        this._checkTasks(allTasks, validateCount, cb)\n        return promise\n      },\n      _checkTasks(allTasks, validateCount, cb) {\n        const configRules = this.rules\n        let isValid = true\n        const result = {}\n        let sync = true\n        this.validating = true\n        const model = this.targetModel\n        parallel(allTasks, (results) => {\n          if (this._validateCount !== validateCount) {\n            return\n          }\n          this.validating = false\n          results.forEach(({ key, valid, ret }) => {\n            const msg = this.messages[key]\n              ? isFunc(this.messages[key])\n                ? this.messages[key](ret, valid)\n                : this.messages[key]\n              : this.findMessage(key, configRules[key], configRules.type, model)\n            if (isValid && !valid) {\n              isValid = false\n              this.msg = msg\n            }\n            result[key] = {\n              valid: valid,\n              invalid: !valid,\n              message: msg\n            }\n          })\n          if (!sync) {\n            this.$emit(EVENT_VALIDATED, isValid)\n          }\n          this._updateModel(isValid, result)\n          cb && cb(this.valid)\n        })\n        if (this.validating) {\n          sync = false\n          // only async validate trigger validating\n          this.$emit(EVENT_VALIDATING)\n          this.valid = undefined\n          this.$emit(EVENT_INPUT, this.valid)\n        }\n      },\n      _updateModel(valid, result) {\n        this.validated = true\n        this.result = result\n        if (result.required && result.required.invalid) {\n          // required\n          this.msg = result.required.message\n        }\n\n        if (valid) {\n          this.msg = ''\n        }\n        this.valid = valid\n        this.$emit(EVENT_INPUT, this.valid)\n      },\n      reset() {\n        this._validateCount++\n        this.validating = false\n        this.dirty = false\n        this.result = {}\n        this.msg = ''\n        this.validated = false\n        this.valid = undefined\n        this.$emit(EVENT_INPUT, this.valid)\n      },\n      msgClickHandler() {\n        this.$emit(EVENT_MSG_CLICK)\n      },\n      findMessage (key, config, type, val) {\n        const messages = this.$cubeMessages\n        const lang = this.$cubeLang\n        const NAMESPACE = 'validator'\n        const target = messages[lang][NAMESPACE][key]\n        if (!target) {\n          return ''\n        }\n        if (isString(target)) {\n          return target\n        } else if (isFunc(target)) {\n          return target(config)\n        } else {\n          if (!target[type]) {\n            type = isArray(val) ? 'array' : typeof val\n          }\n          return typeof target[type] === 'function' ? target[type](config) : template(target[type], config)\n        }\n      }\n    }\n  }\n</script>\n\n<style lang=\"stylus\">\n  @require \"../../common/stylus/variable.styl\"\n\n  .cube-validator\n    .cube-checkbox, .cube-radio\n      color: inherit\n    .cube-input\n      input\n        color: inherit\n    .cube-textarea\n      color: inherit\n    .cube-select\n      color: inherit\n  .cube-validator-msg-def\n    font-size: $fontsize-medium\n    color: $validator-msg-def-color\n</style>\n"],"sourceRoot":"node_modules/_cube-ui@1.12.46@cube-ui/src/components/validator"}]}